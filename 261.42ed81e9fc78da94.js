"use strict";(self.webpackChunke_detection=self.webpackChunke_detection||[]).push([[261],{1261:(v,g,r)=>{r.r(g),r.d(g,{DepartmentUserModule:()=>T});var n=r(9808),f=r(8555),c=r(3075),e=r(5e3),m=r(2451),h=r(520);let u=(()=>{class o{constructor(t,a){this.commonService=t,this.http=a,this.baseUrl=this.commonService.getBaseUrl()}uploadVehiclesData(t){return this.http.post(`${this.baseUrl}/upload`,t)}viewUploadedFiles(){return this.http.get(`${this.baseUrl}/files`)}viewFileByName(t){return this.http.get(`${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.v),e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=r(426),U=r(9457),b=r(1377),D=r(2543),F=r(1062);function Z(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){const d=e.CHM(t).$implicit;return e.oxw().viewFileByUrl(d.url)}),e._uU(1),e.qZA()}if(2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",t.name,"\xa0 ")}}const y=[{path:"",component:(()=>{class o{constructor(t,a,i){this.departmentUserService=t,this.alertService=a,this.formBuilder=i,this.uploadForm=new c.cw({}),this.fileInfoList=[]}ngOnInit(){this.uploadForm=this.formBuilder.group({file:[""]})}selectFile(t){var a=new FormData;a.append("file",t),this.departmentUserService.uploadVehiclesData(a).subscribe(i=>{console.log(i)},i=>{console.log(i),this.alertService.error(i.message)})}onFileSelect(t){if(t.target.files.length>=0){const a=t.target.files[0];this.uploadForm.get("file").setValue(a)}console.log(this.uploadForm.get("file"))}onSubmit(){const t=new FormData;let a=this.uploadForm.get("file");t.append("file",a.value),this.departmentUserService.uploadVehiclesData(t).subscribe(i=>{console.log(i),this.alertService.success("Successfully Updated")},i=>{console.log(i),this.alertService.success("successfully Uploaded")})}viewUploadedFiles(){console.log("Called"),this.departmentUserService.viewUploadedFiles().subscribe(t=>{this.fileInfoList=t,console.log(t)},t=>{this.alertService.error(t.message)})}viewFileByUrl(t){let a=this.departmentUserService.viewFileByName(t).subscribe(i=>{console.log(i);const d=new Blob([i],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(d),s.download="file1",s.click(),s.remove()},i=>{const d=new Blob([i.error.text],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(d),s.download="file1",s.click(),s.remove()});console.log(a)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u),e.Y36(p.c),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-department-user"]],decls:31,vars:17,consts:[[1,"card"],[1,"card-body"],[3,"heading","mainhead","mainheadLink","icon","mainIcon"],[1,"row","mx-auto","text-center"],[3,"formGroup","ngSubmit"],[1,"row","p-5"],[1,"col"],["for","patient-consent",1,"select-file","border","border-dark","btn","btn-primary"],[1,"fa","fa-plus-circle"],["type","file","multiple","","accept",".xlxs,.csv,.jpg,.jpeg,.png","name","uploadpc","id","patient-consent",1,"d-none",3,"change"],["type","submit","mat-raised-button","",1,"btn","btn-success","select-file"],[1,"fa","fas","fa-upload"],[1,"row"],["mat-raised-button","",1,"btn","btn-success","w-100",3,"click"],[1,"list-group","table-stripped"],["type","button","class","list-group-item list-group-item-dark\n              btn btn-primary",3,"click",4,"ngFor","ngForOf"],["type","button",1,"list-group-item","list-group-item-dark","btn","btn-primary",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-page-header",2),e.TgZ(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(5,"div",5)(6,"div",6)(7,"label",7),e._UZ(8,"i",8),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._uU(11,"\xa0 "),e.TgZ(12,"label"),e._uU(13),e.qZA(),e.TgZ(14,"input",9),e.NdJ("change",function(d){return a.onFileSelect(d)}),e.qZA()(),e.TgZ(15,"div",6)(16,"button",10),e._UZ(17,"i",11),e._uU(18),e.ALo(19,"translate"),e.qZA()()()(),e._uU(20," \xa0 "),e._UZ(21,"mat-divider"),e.TgZ(22,"div",12)(23,"div",6)(24,"button",13),e.NdJ("click",function(){return a.viewUploadedFiles()}),e._uU(25),e.ALo(26,"translate"),e.qZA()()(),e.TgZ(27,"div",12)(28,"div",6)(29,"div",14),e.YNc(30,Z,2,1,"button",15),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("heading","Upload Data")("mainhead","Department User")("mainheadLink","/dashboard/department-user")("icon"," fas fa-upload")("mainIcon","fa-user-circle-o"),e.xp6(2),e.Q6J("formGroup",a.uploadForm),e.xp6(5),e.hij("\xa0\xa0",e.lcZ(10,11,"select File")," "),e.xp6(4),e.Oqu(a.uploadForm.get("file").value.name),e.xp6(5),e.hij("\xa0\xa0",e.lcZ(19,13,"Upload"),""),e.xp6(7),e.Oqu(e.lcZ(26,15,"View Uploaded Files")),e.xp6(5),e.Q6J("ngForOf",a.fileInfoList))},directives:[U.q,c._Y,c.JL,c.sg,b.lW,D.d,n.sg],pipes:[F.X$],styles:[".select-file[_ngcontent-%COMP%]{height:auto;width:auto}"]}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(y)],f.Bz]}),o})();var S=r(3361),C=r(6115),L=r(3928);let T=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[n.ez,A,S.$,C.q,c.UX,L.z]]}),o})()},9457:(v,g,r)=>{r.d(g,{q:()=>e});var n=r(5e3),f=r(8555),c=r(1062);let e=(()=>{class m{constructor(){}ngOnInit(){}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275cmp=n.Xpm({type:m,selectors:[["app-page-header"]],inputs:{mainhead:"mainhead",mainheadLink:"mainheadLink",heading:"heading",icon:"icon",mainIcon:"mainIcon"},decls:14,vars:12,consts:[[1,"row"],[1,"col-xl-12"],[1,"page-header"],[1,"breadcrumb","p-1",2,"background-color","rgb(245, 217, 177)","color","black"],[1,"breadcrumb-item"],["href","Javascript:void(0)",3,"routerLink"],[1,"breadcrumb-item","active"]],template:function(u,p){1&u&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"ol",3)(6,"li",4),n._UZ(7,"i"),n._uU(8,"\xa0 "),n.TgZ(9,"a",5),n._uU(10),n.qZA()(),n.TgZ(11,"li",6),n._UZ(12,"i"),n._uU(13),n.qZA()()()()),2&u&&(n.xp6(3),n.hij(" ",n.lcZ(4,10,p.heading)," "),n.xp6(4),n.Gre("fa ",p.mainIcon," "),n.xp6(2),n.Q6J("routerLink",p.mainheadLink),n.xp6(1),n.Oqu(p.mainhead),n.xp6(2),n.Gre("fa ",p.icon,""),n.xp6(1),n.hij("\xa0 ",p.heading,""))},directives:[f.yS],pipes:[c.X$],styles:[""]}),m})()}}]);