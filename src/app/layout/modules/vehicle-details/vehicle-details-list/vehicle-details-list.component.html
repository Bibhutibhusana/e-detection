<div class="card">
	<div class="card-body">
		<div class="row">
			<div class="col-md-3">
				<mat-form-field appearance="fill">
					<mat-label>Choose a Date</mat-label>
					<input matInput [matDatepicker]="picker" (ngModelChange) = "showDate($event)" [(ngModel)] = "date" #inputPicker="ngModel">
					<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
					<mat-datepicker  #picker></mat-datepicker>
				</mat-form-field>
			</div>
			<div class="col-md-3">
				<mat-form-field appearance="fill">
					<mat-label>Search</mat-label>
					<input matInput (keyup)="doFilter($any($event))" placeholder="Ex. ium" #input>
				</mat-form-field>
			</div>
			<div class="col-md-3">
				<button mat-raised-button class="p-2" (click)="toShowView()" [disabled]= "date == null">Show Vehicle Details</button>&nbsp;&nbsp;
			</div>
			
			<div fxLayout fxLayoutAlign="center center">

				
			</div>
		</div>
		<div *ngIf="!showView">
		<h2 style="color:red;">Please Select Date First</h2>
		</div>
		<div class="panel w-100" *ngIf="showView">
		<h3> Invalid Vehicles List for Transaction Date : {{date | date: 'mediumDate'}}</h3>
			<table mat-table [dataSource]="dataSource" matSort matSortActive="id" matSortDirect="asc"
				class="table table-striped table-bordered">
				<ng-container matColumnDef="id">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Seq.Id. </th>
					<td mat-cell *matCellDef="let element;let i= index"> {{i+1}} </td>
				</ng-container>
				<ng-container matColumnDef="vehicleNo">
					<th mat-header-cell *matHeaderCellDef mat-sort-header>VehicleNo. </th>
					<td mat-cell *matCellDef="let element"> {{element.vehicleNo}} </td>
				</ng-container>
				<ng-container matColumnDef="vtClass">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Vt_Class </th>
					<td mat-cell *matCellDef="let element"> {{element.vtClass}} </td>
				</ng-container>
				<ng-container matColumnDef="vhClass">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Vh_Class. </th>
					<td mat-cell *matCellDef="let element"> {{element.vhClass}} </td>
				</ng-container>
				<ng-container matColumnDef="taxUpto">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Tax Upto </th>
					<td mat-cell *matCellDef="let element">
						<p *ngIf="element.transactionDate == null" style="color:red;"> {{element.taxUpto|
							date:'dd-MM-yyyy'}}</p>
						<p *ngIf="element.transactionDate >element.taxUpto" style="color:red;"> {{element.taxUpto|
							date:'dd-MM-yyyy'}}</p>
						<p *ngIf="element.transactionDate < element.taxUpto">{{element.taxUpto | date:'dd-MM-yyyy'}}</p>
					</td>

				</ng-container>
				<ng-container matColumnDef="fitUpto">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Fit Upto </th>
					<td mat-cell *matCellDef="let element">
						<p *ngIf="element.transactionDate == null" style="color:red;"> {{element.fitUpto|
							date:'dd-MM-yyyy'}}</p>
						<p *ngIf="element.transactionDate >element.fitUpto" style="color:red;"> {{element.fitUpto|
							date:'dd-MM-yyyy'}}</p>
						<p *ngIf="element.transactionDate < element.fitUpto">{{element.fitUpto | date:'dd-MM-yyyy'}}
						</p>
					</td>
				</ng-container>
				<ng-container matColumnDef="insUpto">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Insurance Upto. </th>
					<td mat-cell *matCellDef="let element">
						<p *ngIf="element.transactionDate == null" style="color:red;"> {{element.insUpto|
							date:'dd-MM-yyyy'}}</p>
						<p *ngIf="element.transactionDate >element.insUpto" style="color:red;"> {{element.insUpto|
							date:'dd-MM-yyyy'}}</p>
						<p *ngIf="element.transactionDate < element.insUpto">{{element.insUpto | date:'dd-MM-yyyy'}}
						</p>
					</td>
				</ng-container>
				<ng-container matColumnDef="nonUseStat">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Non-Use Status </th>
					<td mat-cell *matCellDef="let element">
						<p *ngIf="element.nonUseStat == null" style="color:red;">{{element.nonUseStat}}</p>
						<p *ngIf="element.nonUseStat == 'Nonuse' " style="color:red;">{{element.nonUseStat}}</p>
						<p *ngIf="element.nonUseStat == 'No-Nonuse'" style="color:black;">{{element.nonUseStat}}</p>
					</td>
				</ng-container>
				<tr mat-header-row class="mat-head" *matHeaderRowDef="displayedColumns;"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;" style="background-color: #ffffff;">
					padding: 0;
					margin: 0; max-height: 10px;"></tr>
				<tr mat-row *matNoDataRow>
					<td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
				</tr>
				
			</table>
			
		</div>
		<div [ngStyle]="{'display':showView == true ? 'block' : 'none' }">
			<mat-paginator [pageSizeOptions]="[ 10, 25, 100]" aria-label="Select page of users"></mat-paginator>
		</div>
	</div>
</div>